<app-nav></app-nav>

  <div class="container mt-5">
    <h2 class="mb-4 text-primary"><i class="bi bi-cart3"></i> Carrito</h2>

    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th scope="col">Producto</th>
            <th scope="col">Precio</th>
            <th scope="col" style="width: 150px;">Cantidad</th>
            <th scope="col">Subtotal</th>
            <th scope="col" class="text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let articulo of articulosAgrupados">
            <td>
              <div class="d-flex align-items-center">
                <img [src]="'data:image/png;base64,' + articulo.imagen" alt="Producto" class="rounded me-3" width="60" height="60">
                <div>
                  <h6 class="mb-0">{{articulo.descripcion}}</h6>
                </div>
              </div>
            </td>
            <td>{{articulo.precio | currency}}</td>
            <td>
              <input type="number" class="form-control form-control-sm" [value]="articulo.cantidad" min="1">
            </td>
            <td class="fw-bold">{{articulo.subtotal | currency}}</td>
            <td class="text-center">
              <button class="btn btn-outline-danger btn-sm" (click)="deleteArticulo(articulo.id)">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="text-end fw-bold">Total:</td>
            <td colspan="2" class="fs-5 text-primary fw-bold">{{getTotal() | currency}}</td>
          </tr>
        </tfoot>
      </table>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <a href="/home" class="btn btn-link text-decoration-none">
        <i class="bi bi-arrow-left"></i> Continuar comprando
      </a>
      <button class="btn btn-primary px-4 shadow-sm">Proceder al pago</button>
    </div>
  </div>
